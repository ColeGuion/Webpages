<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shortcuts</title>
    <link rel="stylesheet" href="Style/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
    </style>
</head>

<body>
    <nav>
        <a href="home.html">Home</a>
        <a href="shortcuts.html" class="active">Shortcuts</a>
        <a href="programs.html#Linux">Programming</a>
        <a href="docs.html">Docs</a>
        <a href="playground.html">Playground</a>
        <a href="todo.html">To Do List</a>
    </nav>
    <span class="todo"><u>TODO</u>: Add shortcut from <a href="https://support.microsoft.com/en-us/windows/keyboard-shortcuts-in-windows-dcc61a57-8ff0-cffe-9796-cb9706c75eec">Windows Keys Shortcuts</a></span>
    
    <div class="shortcut-section">
        <h2 onclick="toggleSection(this)">Visual Studio Code</h2>
        <div class="cuts">
            <div class="scTable">
                <div class="tableName">More</div>
                <div>ALT + Click</div>
                <div>Insert Multi-Cursors</div>
                <div>F12</div>
                <div>Go To Definition</div>
                <div>ALT + UP<b>/</b>DOWN</div>
                <div>Move a Line of Code</div>
                <div>ALT + <i class="fa-solid fa-arrow-left"></i><b>/</b><i class="fa-solid fa-arrow-right"></i></div>
                <div>Left/Right Tab</div>
                <div>CTRL + P</div>
                <div>List All Files</div>
                <div>CTRL + SHIFT + R</div>
                <div>Find All References</div>
                <div>CTRL + G</div>
                <div>Jump To Line</div>
                <div>CTRL + K + S</div>
                <div>Keyboard Shortcuts</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>

            </div>
            <div class="scTable">
                <div class="tableName">Open Files & Tabs</div>
                <div>CTRL + SHIFT + E</div>
                <div>Open Extensions Tab</div>
                <div>ALT + Click</div>
                <div>Insert Multi-Cursors</div>
                <div>CTRL + SHIFT + F</div>
                <div>Open File Explorer Tab</div>
                <div>CTRL + T</div>
                <div>New File</div>
                <div>CTRL + O</div>
                <div>Open File</div>
                <div>CTRL + K + O</div>
                <div>Open Folder</div>
                <div>CTRL + W</div>
                <div>Close Current Tab</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>
            </div>
            <div class="scTable">
                <div class="tableName">Collapsing</div>
                <div>CTRL + K + 0</div>
                <div>Collapse All</div>
                <div>CTRL + SHIFT + [</div>
                <div>Collapse Section</div>
                <div>CTRL + SHIFT + ]</div>
                <div>Expand Section</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>
            </div>
        </div>
    </div>

    <div class="shortcut-section">
        <h2 onclick="toggleSection(this)">Google Chrome</h2>
        <div class="cuts">
            <div class="scTable">
                <div class="tableName">Navigation</div>
                <div>CTRL + T</div>
                <div>Open a New Window</div>
                <div>CTRL + TAB</div>
                <div>Go to Next Tab</div>
                <div>CTRL + SHIFT + TAB</div>
                <div>Go to Previous Tab</div>
                <div>CTRL + 1<b>-</b>8</div>
                <div>Jump to a Specific Tab</div>
                <div>CTRL + 9</div>
                <div>Jump to Rightmost Tab</div>
                <div>CTRL + W</div>
                <div>Close the Current Tab</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>
            </div>

            <div class="scTable">
                <div class="tableName">More</div>
                <div>CTRL + R</div>
                <div>Normal Reload</div>
                <div>CTRL + SHIFT + R</div>
                <div>Hard Reload</div>
                <div>WIN + TAB</div>
                <div>Open Task View</div>
                <div>CTRL + D</div>
                <div>Duplicate Tab</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>
            </div>

            <div class="scTable">
                <div class="tableName">Editing</div>
                <div>CTRL + Z</div>
                <div>Undo Change</div>
                <div>CTRL + Y</div>
                <div>Redo Change</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>
            </div>
        </div>
    </div>

    <div class="shortcut-section">
        <h2 onclick="toggleSection(this)">Windows (PowerToys)</h2>
        <div class="cuts" id="winTables">
            <div class="scTable">
                <div class="tableName">More</div>
                <div>WIN + CTRL + T</div>
                <div>Pin a Window</div>
                <div>WIN + SHIFT + T</div>
                <div>Text Extractor</div>
                <div>WIN + SHIFT + C</div>
                <div>Color Picker</div>
                <div>WIN + SHIFT + V</div>
                <div>Advanced Paste</div>
                <button class="add-row-btn" onclick="addEditableRow(this.parentNode)"><i class="fas fa-plus"></i> Add Shortcut</button>
            </div>
        </div>
    </div>

    <script>
        // Collapse/Expand Sections
        function toggleSection(header) {
            let content = header.nextElementSibling;
            content.classList.toggle("collapsed");
        }

        // Change all '+' characters in .scTable element to be wrapped in <b></b>
        document.addEventListener('DOMContentLoaded', function() {
            const allDivs = document.querySelectorAll('.scTable div');
            allDivs.forEach(div => {
                div.innerHTML = div.innerHTML.replace(/\+/g, '<b>+</b>');    
            });
        });

        // Save table data to localStorage
        function saveTableData(table) {
            const tableId = table.getAttribute('data-table-id');
            const items = [];
            const divs = table.querySelectorAll('div:not(.tableName):not(.editable-row input)');
            
            for (let i = 0; i < divs.length; i += 2) {
                items.push({
                    shortcut: divs[i].textContent,
                    description: divs[i+1].textContent
                });
            }
            
            localStorage.setItem(`shortcutTable-${tableId}`, JSON.stringify(items));
        }

        // Load table data from localStorage
        function loadTableData() {
            const tables = document.querySelectorAll('.scTable');
            tables.forEach(table => {
                const tableId = table.getAttribute('data-table-id');
                const savedData = localStorage.getItem(`shortcutTable-${tableId}`);
                
                if (savedData) {
                    // Clear existing content (except table name and add button)
                    const tableName = table.querySelector('.tableName').textContent;
                    const addButton = table.querySelector('.add-row-btn');
                    table.innerHTML = '';
                    table.appendChild(document.createElement('div')).className = 'tableName';
                    table.querySelector('.tableName').textContent = tableName;
                    
                    // Add saved items
                    const items = JSON.parse(savedData);
                    items.forEach(item => {
                        const shortcutDiv = document.createElement('div');
                        shortcutDiv.textContent = item.shortcut;
                        
                        const descriptionDiv = document.createElement('div');
                        descriptionDiv.textContent = item.description;
                        
                        table.appendChild(shortcutDiv);
                        table.appendChild(descriptionDiv);
                    });
                    
                    // Re-add the add button
                    table.appendChild(addButton);
                    
                    // Format the shortcuts
                    formatShortcuts();
                }
            });
        }

        // Add editable row to a table
        function addEditableRow(table) {
            const d1 = document.createElement('div');
            const d2 = document.createElement('div');
            const btnDiv = document.createElement('div');
            const saveBtn = document.createElement('button');
            d1.contentEditable = true;
            d2.contentEditable = true;
            btnDiv.style.gridColumn = 'span 2';
            saveBtn.innerHTML = '<i class="fas fa-check"></i>';
            btnDiv.appendChild(saveBtn);
            saveBtn.onclick = function() {
                // Create new shortcut divs
                const shortcutDiv = document.createElement('div');
                shortcutDiv.textContent = d1.innerText;
                
                const descriptionDiv = document.createElement('div');
                descriptionDiv.textContent = d2.innerText;
                
                // Insert before the add button
                table.insertBefore(descriptionDiv, table.lastElementChild);
                table.insertBefore(shortcutDiv, descriptionDiv);
                
                // Format the new content
                shortcutDiv.textContent = shortcutDiv.textContent.toUpperCase();
                shortcutDiv.innerHTML = shortcutDiv.innerHTML.replace(/\+/g, '<b>+</b>');
                
                // Remove the editable row
                table.removeChild(btnDiv);
                table.removeChild(d2);
                table.removeChild(d1);
                    
                // Save the updated table
                saveTableData(table);
            };
            table.insertBefore(d1, table.lastElementChild);
            table.insertBefore(d2, table.lastElementChild);
            table.insertBefore(btnDiv, table.lastElementChild);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            formatShortcuts();
            loadTableData();
        });
    </script>
    <script>
    </script>
</body>
</html>